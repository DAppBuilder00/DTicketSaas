/* ---------- CSS Variables ---------- */
:root{
  --bg:#0f1220; --panel:#12172a; --muted:#8a94a7; --text:#ecf1ff; --accent:#7c9cff; --accent-2:#4ad2c7;
  --danger:#ff6363; --warn:#ffcb6b; --ok:#4ad27a; --card:#161b33; --chip:#1d2342; --border:#1f2647;
  --shadow:0 10px 25px rgba(0,0,0,.35); --radius:16px; --radius-sm:10px;
}
[data-theme="light"]{
  --bg:#f6f7fb; --panel:#ffffff; --muted:#667085; --text:#0c1222; --accent:#365cff; --accent-2:#12a594;
  --danger:#ff3b30; --warn:#f5a524; --ok:#16a34a; --card:#ffffff; --chip:#eef2ff; --border:#e2e8f0;
  --shadow:0 10px 30px rgba(16,24,40,.08);
}

/* ---------- Base ---------- */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
     background:var(--bg); color:var(--text);}
a{color:var(--accent); text-decoration:none}
.nomargin{margin:0}

/* ---------- App Layout ---------- */
.app{display:grid; grid-template-rows:64px 1fr; min-height:100vh}
.topbar{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 18px;
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,0)); position:sticky; top:0;
  backdrop-filter:blur(10px); border-bottom:1px solid var(--border); z-index:10}
.brand{display:flex; align-items:center; gap:10px; font-weight:700}
.logo{width:32px; height:32px; display:grid; place-items:center; background:conic-gradient(from 210deg, var(--accent), var(--accent-2)); border-radius:9px; box-shadow:var(--shadow)}
.top-actions{display:flex; align-items:center; gap:10px}
.btn{border:1px solid var(--border); background:linear-gradient(180deg, var(--card), rgba(255,255,255,.01)); color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; transition:.18s transform ease, .18s opacity ease; display:inline-flex; gap:8px; align-items:center}
.btn:hover{transform: translateY(-1px)}
.btn.primary{background: linear-gradient(180deg, var(--accent), #4f6dff); border-color: transparent; color:white}
.btn.ghost{background: transparent}
.btn.warn{background: linear-gradient(180deg, var(--warn), #e7a933); border-color:transparent; color:#111827}
.btn.danger{background: linear-gradient(180deg, var(--danger), #de3d3d); border-color:transparent; color:white}

.layout{display:grid; grid-template-columns:260px 1fr; gap:16px; padding:16px}
.sidebar{background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:14px; height: calc(100vh - 64px - 32px); position:sticky; top:80px; overflow:auto}
.nav h4{margin:10px 8px; opacity:.8}
.nav .item{display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; cursor:pointer; user-select:none}
.nav .item:hover{background: rgba(255,255,255,.06)}
.nav .item.active{background: linear-gradient(180deg, rgba(124,156,255,.2), rgba(124,156,255,.07)); border:1px solid rgba(124,156,255,.35)}

.content{display:grid; gap:16px}
.panel{background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow)}
.panel-header{display:flex; align-items:center; justify-content:space-between; padding:16px; border-bottom:1px solid var(--border)}
.panel-body{padding:16px}
.grid{display:grid; gap:16px}
.grid.cols-3{grid-template-columns: repeat(3, minmax(0,1fr))}
.grid.two-col{grid-template-columns: 1fr 320px; gap:16px}
.span-2{grid-column: span 2 / span 2}
.maxw{max-width:820px}
.row{display:flex; align-items:center; gap:8px}
.row.wrap{flex-wrap:wrap}
.row.gap10{gap:10px}
.row.gap12{gap:12px}
.row.gap6{gap:6px}
.row.between{justify-content:space-between}
.search{display:flex; gap:8px}
.input, select, textarea{width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:var(--card); color:var(--text)}
textarea{min-height:120px}
.divider{height:1px; background:var(--border); margin:16px 0}
.footer{padding:14px; text-align:center; color:var(--muted)}
.hidden{display:none !important}
.chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:var(--chip); border:1px solid var(--border); font-size:12px}
.chip.ok{background: rgba(74,210,122,.12); border-color: rgba(74,210,122,.25)}
.chip.warn{background: rgba(255,203,107,.12); border-color: rgba(255,203,107,.25)}
.chip.danger{background: rgba(255,99,99,.12); border-color: rgba(255,99,99,.28)}
.badge{padding:6px 10px; border-radius:12px; background:linear-gradient(180deg, rgba(124,156,255,.18), rgba(124,156,255,.08)); border:1px solid rgba(124,156,255,.35); font-size:12px}

/* ---------- Table (Windows-friendly) ---------- */
.table-wrap{overflow-x:auto}
.tickets-table{width:100%; border-collapse:collapse; table-layout:fixed}
.tickets-table th, .tickets-table td{padding:12px 10px; border-bottom:1px solid var(--border); text-align:left; vertical-align:middle}
.tickets-table th{font-size:12px; color:var(--muted); font-weight:600; text-transform:uppercase; letter-spacing:.04em}
.tickets-table tbody tr:hover td{background: rgba(255,255,255,.03)}
.tickets-table td:nth-child(1){text-align:center}
.tickets-table td:nth-child(3), .tickets-table td:nth-child(4), .tickets-table td:nth-child(5),
.tickets-table th:nth-child(3), .tickets-table th:nth-child(4), .tickets-table th:nth-child(5){white-space:nowrap}
.tag{display:inline-block; padding:4px 8px; border-radius:999px; background:var(--chip); border:1px solid var(--border); font-size:12px; margin-right:6px}

/* ---------- Pipeline ---------- */
.pipeline{display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:16px}
.stage{background:var(--panel); border:1px solid var(--border); border-radius:var(--radius)}
.stage-header{padding:12px 14px; border-bottom:1px solid var(--border); font-weight:600}
.dropzone{min-height:260px; padding:12px; display:grid; gap:10px}
.card{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:10px; cursor:grab}
.card:active{cursor:grabbing}

/* ---------- Toast ---------- */
.toast{position: fixed; right:16px; bottom:16px; background:var(--panel); border:1px solid var(--border); padding:12px 14px; border-radius:12px; box-shadow: var(--shadow)}

/* ---------- Modal ---------- */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.5); display:grid; place-items:center; z-index:50}
.modal-card{width:min(720px, 92vw); background:var(--panel); border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow)}
.modal-header, .modal-footer{padding:14px 16px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between}
.modal-footer{border-top:1px solid var(--border); border-bottom:none}
.modal-body{padding:16px}

/* ---------- Responsive ---------- */
@media (max-width: 1024px){
  .layout{grid-template-columns:1fr}
  .sidebar{position:relative; height:auto}
  .grid.cols-3{grid-template-columns:1fr}
  .grid.two-col{grid-template-columns:1fr}
}
